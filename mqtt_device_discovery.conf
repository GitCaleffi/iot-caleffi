# MQTT Device Discovery Configuration
# Add this to /etc/mosquitto/conf.d/device-discovery.conf

# Listen on all interfaces for device discovery
listener 1883 0.0.0.0
allow_anonymous true

# Enable websockets for web clients (optional)
listener 9001
protocol websockets
allow_anonymous true

# Logging configuration
log_type error
log_type warning
log_type notice
log_type information

# Connection logging
connection_messages true
log_timestamp true

# Persistence for device state
persistence true
persistence_location /var/lib/mosquitto/

# Retain messages for device announcements
# This ensures new server connections get current device states
max_queued_messages 1000
message_size_limit 8192
